# SW-Monitor-Uniandes üíß
### Plataforma gestora de datos, indicadores y mapas de visualizaci√≥n sobre la calidad del agua

> **‚ö†Ô∏è ESTADO DEL PROYECTO:** Este repositorio se encuentra **descontinuado** y ya no est√° en desarrollo activo.

Una plataforma avanzada de gesti√≥n y visualizaci√≥n de datos ambientales desarrollada para el Proyecto de Monitoreo Ciudadano de la Universidad de los Andes, que permite gestionar y visualizar datos sobre la calidad del agua en fuentes h√≠dricas de Colombia mediante mapas interactivos y APIs p√∫blicas.

![Tecnolog√≠as del proyecto](https://img.shields.io/badge/Laravel-FF2D20?style=for-the-badge&logo=laravel&logoColor=white)
![Vue.js](https://img.shields.io/badge/Vue.js-35495E?style=for-the-badge&logo=vue.js&logoColor=4FC08D)
![MySQL](https://img.shields.io/badge/MySQL-00000F?style=for-the-badge&logo=mysql&logoColor=white)
![OpenStreetMap](https://img.shields.io/badge/OpenStreetMap-7EBC6F?style=for-the-badge&logo=openstreetmap&logoColor=white)

## üåä Descripci√≥n del Proyecto

### Contexto: Proyecto de Monitoreo Ciudadano

El Proyecto de Monitoreo Ciudadano es una iniciativa de la Universidad de los Andes, liderada por la Facultad de Ingenier√≠a y la Facultad de Econom√≠a, cuyo objetivo principal es recolectar datos sobre la calidad del agua en diversas fuentes h√≠dricas de Colombia con la participaci√≥n activa de las comunidades locales.

Los datos son capturados mediante **sondas especializadas** instaladas en puntos estrat√©gicos y posteriormente organizados por los encargados del proyecto para an√°lisis internos por investigadores y expertos en gesti√≥n del agua.

### Alcance de la Plataforma SW-Monitor

Esta plataforma se centra en crear un sistema avanzado de **gesti√≥n y visualizaci√≥n de datos** que ofrece:

- **üìä Gesti√≥n avanzada de datos:** Carga y almacenamiento seguro en MySQL
- **üó∫Ô∏è Visualizaci√≥n interactiva:** Mapas din√°micos y gr√°ficos geoespaciales
- **üîå API p√∫blica:** Integraci√≥n con otros sistemas y portales web
- **üì± Microfrontend embebible:** Visualizador integrable en cualquier sitio web

## üèóÔ∏è Arquitectura del Sistema

La plataforma implementa una **arquitectura modular backend/frontend** con las siguientes capas:

### Backend (Laravel)
- **Gesti√≥n de datos:** Carga desde tablas organizadas y almacenamiento en MySQL
- **API RESTful:** Endpoints p√∫blicos para acceso a datos de calidad del agua
- **C√°lculos geoespaciales:** Algoritmos de geofencing para determinar proximidad
- **Procesamiento de sondas:** Recepci√≥n y validaci√≥n de datos de sensores

### Frontend (Vue.js)
- **Visualizador interactivo:** Mapas din√°micos con OpenStreetMap
- **Microfrontend:** Componente embebible en portales web
- **Interfaz responsiva:** Adaptable a diferentes dispositivos y resoluciones
- **Filtros geogr√°ficos:** Preselecci√≥n autom√°tica por zonas espec√≠ficas

### Integraci√≥n de Datos
- **Sondas IoT** ‚Üí **Procesamiento Laravel** ‚Üí **Almacenamiento MySQL** ‚Üí **Visualizaci√≥n Vue.js**

## üõ†Ô∏è Stack Tecnol√≥gico

| Categor√≠a | Tecnolog√≠a | Uso |
|-----------|------------|-----|
| **Backend** | ![Laravel](https://img.shields.io/badge/-Laravel-FF2D20?style=flat&logo=laravel&logoColor=white) Laravel | Framework principal, API REST |
| **Frontend** | ![Vue.js](https://img.shields.io/badge/-Vue.js-4FC08D?style=flat&logo=vue.js&logoColor=white) Vue.js | Visualizador interactivo |
| **Estilos** | ![SASS](https://img.shields.io/badge/-SASS-CC6699?style=flat&logo=sass&logoColor=white) SASS | Preprocesador CSS |
| **Base de datos** | ![MySQL](https://img.shields.io/badge/-MySQL-4479A1?style=flat&logo=mysql&logoColor=white) MySQL | Almacenamiento de datos |
| **Mapas** | ![OpenStreetMap](https://img.shields.io/badge/-OpenStreetMap-7EBC6F?style=flat&logo=openstreetmap&logoColor=white) OpenStreetMap | Cartograf√≠a base |
| **Lenguaje** | ![PHP](https://img.shields.io/badge/-PHP-777BB4?style=flat&logo=php&logoColor=white) PHP | Lenguaje backend |

## üì° Flujo de Datos

```mermaid
graph LR
    A[Sondas IoT] --> B[Recolecci√≥n de Datos]
    B --> C[Organizaci√≥n en Tablas]
    C --> D[Carga a Plataforma Laravel]
    D --> E[C√°lculo Geoespacial]
    E --> F[API P√∫blica]
    F --> G[Visualizador Vue.js]
    G --> H[Mapa Interactivo]
```

### Proceso Detallado

1. **üî¨ Recolecci√≥n:** Sondas capturan datos de calidad del agua (pH, temperatura, conductividad, ox√≠geno disuelto)
2. **üìã Organizaci√≥n:** Equipo de Monitoreo Ciudadano estructura los datos en tablas
3. **‚ö° Carga:** Datos son importados a la plataforma Laravel
4. **üìç Geolocalizaci√≥n:** C√°lculos de geofencing determinan proximidad a ciudades/regiones
5. **üåê API:** Datos disponibles v√≠a endpoints RESTful p√∫blicos
6. **üó∫Ô∏è Visualizaci√≥n:** Mapas interactivos muestran informaci√≥n en tiempo real

## üîç Caracter√≠sticas Principales

### üìä Gesti√≥n de Datos
- Importaci√≥n masiva desde archivos estructurados
- Validaci√≥n autom√°tica de datos de sensores
- Almacenamiento seguro con respaldos autom√°ticos
- Historial completo de mediciones

### üó∫Ô∏è Visualizaci√≥n Geoespacial
- **Mapas interactivos** con OpenStreetMap
- **Pines din√°micos** representando ubicaciones de sondas
- **Informaci√≥n detallada** al hacer clic en cada punto
- **Filtros geogr√°ficos** por regi√≥n/ciudad
- **Zoom autom√°tico** seg√∫n la zona seleccionada

### üîå API P√∫blica
- Endpoints RESTful para acceso a datos
- Filtrado por coordenadas y radio de b√∫squeda
- Respuestas en formato JSON est√°ndar
- Documentaci√≥n completa de endpoints

### üì± Microfrontend Embebible
- Integraci√≥n sencilla en cualquier portal web
- Configuraci√≥n autom√°tica por ubicaci√≥n
- Dise√±o responsivo para m√≥viles y escritorio
- Personalizaci√≥n de colores y estilos

## üåç Ejemplo de Implementaci√≥n

### C√°lculo de Distancias Geoespaciales

```php
public function dataInPerimeter(float $latitude = 0, float $longitude = 0, $zoom)
{
    $latName = "latitud";
    $lonName = "longitud";
    
    // C√°lculo del radio basado en el nivel de zoom
    $km = (40000/pow(2, $zoom)) * 2;
    
    // F√≥rmula de distancia geoespacial (Haversine)
    $sql = "6371 * acos(
        cos(radians(?)) *
        cos(radians(".$latName.")) *
        cos(radians(".$lonName.") - radians(?))
        + sin(radians(?)) *
        sin(radians(".$latName."))
    ) AS distance";
    
    $query = Registro::whereHas('transferencia', function($query){
        $query->where('estado', 1);
    })
    ->select('id', 'hg', 'region_id', 'longitud', 'latitud', 'conduct', 'ph', 'temperatura', 'od', 'created_at')
    ->selectRaw($sql, [$latitude, $longitude, $latitude])
    ->havingRaw('distance BETWEEN 0 AND '.$km)
    ->orderBy('distance', 'ASC')
    ->get();
    
    return $query;
}
```

### Respuesta del API

```json
{
  "registros": [
    {
      "id": 62,
      "longitud": -74.065282,
      "latitud": 4.603333,
      "conduct": 10.11,
      "ph": 5.24,
      "temperatura": 16,
      "od": 7.77,
      "distance": 0.4493249442694154
    }
  ],
  "message": "Retrieved successfully"
}
```

## üìä Par√°metros de Calidad del Agua

La plataforma monitorea los siguientes indicadores:

| Par√°metro | Descripci√≥n | Unidad | Importancia |
|-----------|-------------|--------|-------------|
| **pH** | Nivel de acidez/alcalinidad | Escala 0-14 | Habitabilidad acu√°tica |
| **Temperatura** | Temperatura del agua | ¬∞C | Ecosistema acu√°tico |
| **Conductividad** | Capacidad de conducir electricidad | ŒºS/cm | Contenido de sales |
| **Ox√≠geno Disuelto (OD)** | Concentraci√≥n de ox√≠geno | mg/L | Vida acu√°tica |

## üöÄ Casos de Uso

### 1. Portal Universidad de los Andes
- **Zona:** Bogot√° y alrededores
- **Configuraci√≥n:** Carga autom√°tica datos regi√≥n Bogot√°
- **Uso:** Investigaci√≥n acad√©mica y divulgaci√≥n

### 2. Portal Regional Samac√°
- **Zona:** Boyac√° - Samac√°
- **Configuraci√≥n:** Filtro autom√°tico zona rural
- **Uso:** Monitoreo comunitario local

### 3. Integraci√≥n en Portales Municipales
- **Personalizaci√≥n:** Colores institucionales
- **Datos:** Espec√≠ficos por municipio
- **Funci√≥n:** Transparencia ambiental

## üìÅ Estructura del Proyecto

```
SW-Monitor-Uniandes/
‚îú‚îÄ‚îÄ app/                    # L√≥gica principal Laravel
‚îÇ   ‚îú‚îÄ‚îÄ Http/Controllers/   # Controladores API
‚îÇ   ‚îú‚îÄ‚îÄ Models/            # Modelos de datos
‚îÇ   ‚îî‚îÄ‚îÄ Services/          # Servicios geoespaciales
‚îú‚îÄ‚îÄ database/              # Migraciones y schemas
‚îÇ   ‚îú‚îÄ‚îÄ migrations/        # Estructura de BD
‚îÇ   ‚îî‚îÄ‚îÄ seeders/          # Datos de prueba
‚îú‚îÄ‚îÄ resources/             # Frontend Vue.js
‚îÇ   ‚îú‚îÄ‚îÄ js/components/     # Componentes Vue
‚îÇ   ‚îú‚îÄ‚îÄ sass/             # Estilos SCSS
‚îÇ   ‚îî‚îÄ‚îÄ views/            # Plantillas Blade
‚îú‚îÄ‚îÄ routes/               # Definici√≥n de rutas
‚îÇ   ‚îú‚îÄ‚îÄ api.php          # Endpoints API
‚îÇ   ‚îî‚îÄ‚îÄ web.php          # Rutas web
‚îú‚îÄ‚îÄ public/              # Assets p√∫blicos
‚îî‚îÄ‚îÄ config/              # Configuraciones
```

## ‚öôÔ∏è Instalaci√≥n y Configuraci√≥n

> **Nota:** Este proyecto est√° descontinuado, la informaci√≥n siguiente es solo para referencia hist√≥rica.

### Requisitos del Sistema
- **PHP** >= 7.4
- **Composer** 2.x
- **Node.js** >= 14.x
- **MySQL** >= 5.7
- **Laravel** 8.x

### Instalaci√≥n

```bash
# Clonar el repositorio
git clone https://github.com/Leandro-Moreno/SW-Monitor-Uniandes.git
cd SW-Monitor-Uniandes

# Instalar dependencias PHP
composer install

# Instalar dependencias Node.js
npm install

# Configurar variables de entorno
cp .env.example .env
php artisan key:generate

# Configurar base de datos en .env
DB_DATABASE=sw_monitor
DB_USERNAME=tu_usuario
DB_PASSWORD=tu_password

# Ejecutar migraciones
php artisan migrate --seed

# Compilar assets frontend
npm run dev

# Iniciar servidor de desarrollo
php artisan serve
```

### Configuraci√≥n del Visualizador

```javascript
// Integraci√≥n en sitio web externo
<div id="water-monitor"></div>

<script>
const config = {
  apiUrl: 'https://tu-dominio.com/api',
  defaultLocation: {
    lat: 4.603333,
    lng: -74.065282,
    zoom: 12
  },
  theme: 'uniandes' // o 'custom'
};

new WaterMonitor('#water-monitor', config);
</script>
```

## üîó Enlaces y Recursos

### Documentaci√≥n del Proyecto
- **üìñ Caso de Estudio Completo:** [Monitoreo Ciudadano del Agua](https://leandromoreno.co/proyectos/monitoreo-ciudadano-del-agua-uniandes/)
- **üèõÔ∏è Cliente:** Facultad de Ingenier√≠a & Facultad de Econom√≠a - Universidad de los Andes
- **üë®‚Äçüíª Desarrollador:** [Leandro Moreno](https://leandromoreno.co)

### APIs y Endpoints
```
GET /api/registros                    # Todos los registros
GET /api/registros/perimeter          # Registros por per√≠metro
GET /api/regiones                     # Regiones disponibles
GET /api/sondas                       # Lista de sondas activas
```

## üèÜ Impacto y Resultados

### üéØ Logros Principales
- **‚úÖ Automatizaci√≥n completa** del proceso de visualizaci√≥n
- **‚úÖ API p√∫blica** para integraci√≥n con m√∫ltiples portales
- **‚úÖ Interfaz intuitiva** para usuarios no t√©cnicos
- **‚úÖ Escalabilidad** para nuevas zonas de monitoreo
- **‚úÖ Contribuci√≥n** a la investigaci√≥n ambiental nacional

### üìà M√©tricas de Adopci√≥n
- **üåç M√∫ltiples regiones** de Colombia cubiertas
- **üî¨ Datos cient√≠ficos** validados por expertos
- **üë• Participaci√≥n ciudadana** en monitoreo ambiental
- **üèõÔ∏è Integraci√≥n institucional** en portales oficiales

## üö´ Estado de Descontinuaci√≥n

### üìÖ Informaci√≥n del Ciclo de Vida
- **Fecha de desarrollo:** 2021-2022
- **Estado actual:** üî¥ **Descontinuado**
- **√öltima actualizaci√≥n:** 2022
- **C√≥digo:** Disponible solo para referencia

### üîç Razones de Descontinuaci√≥n
Este proyecto cumpli√≥ exitosamente sus objetivos de demostrar la viabilidad de una plataforma integrada de monitoreo ambiental. El c√≥digo se mantiene disponible como:

- **üìö Referencia t√©cnica** para desarrollos similares
- **üéì Material de estudio** para implementaciones de geolocalizaci√≥n
- **üí° Inspiraci√≥n** para proyectos de impacto social
- **üèóÔ∏è Base arquitect√≥nica** para plataformas ambientales

## ü§ù Contribuciones y Legado

Este proyecto demostr√≥ c√≥mo la tecnolog√≠a puede facilitar la **participaci√≥n ciudadana en el monitoreo ambiental**, creando un puente entre la recolecci√≥n de datos cient√≠ficos y su comprensi√≥n p√∫blica a trav√©s de visualizaciones accesibles.

La arquitectura modular desarrollada sirve como **referencia para futuras implementaciones** de sistemas de monitoreo ambiental con componentes embebibles y APIs p√∫blicas.

---

## üìû Contacto y Soporte

- **üíº Portafolio:** [leandromoreno.co](https://leandromoreno.co)
- **üìß Email:** contacto@leandromoreno.co
- **üåê Proyecto Completo:** [Caso de Estudio - Monitoreo Ciudadano](https://leandromoreno.co/proyectos/monitoreo-ciudadano-del-agua-uniandes/)

---

*Desarrollado con üíö para la protecci√≥n de las fuentes h√≠dricas de Colombia*

## üìÑ Licencia

Este proyecto est√° descontinuado y se proporciona √∫nicamente con fines de referencia y estudio.
